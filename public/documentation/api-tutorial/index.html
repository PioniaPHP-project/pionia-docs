<!doctype html>
<html lang="en" data-bs-theme="auto">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><link rel="preload" href="http://localhost:1313/fonts/vendor/jost/jost-v4-latin-regular.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="http://localhost:1313/fonts/vendor/jost/jost-v4-latin-500.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="http://localhost:1313/fonts/vendor/jost/jost-v4-latin-700.woff2" as="font" type="font/woff2" crossorigin>
<script 
  src="/js/color-mode.f14b3e296de1d0b69e75af684b62a4a912a2cadab04e36123407cd8388204f1d.js"
  integrity="sha256-8Us&#43;KW3h0Laeda9oS2KkqRKiytqwTjYSNAfNg4ggTx0=">
</script>


<link rel="stylesheet" href="/main.01b0834d5af51b24812d02878d09c8d7677d6b8af13164fb50215889dc19aaefd0e9366c13b45a9a57ae481dfd1836bce46b5ebfe461d56e3498b9443d8c5e27.css" integrity="sha512-AbCDTVr1GySBLQKHjQnI12d9a4rxMWT7UCFYidwZqu/Q6TZsE7RamleuSB39GDa85Gtev&#43;Rh1W40mLlEPYxeJw==" crossorigin="anonymous">

<noscript><style>img.lazyload { display: none; }</style></noscript><base href="http://localhost:1313/documentation/api-tutorial/">
  <link rel="canonical" href="http://localhost:1313/documentation/api-tutorial/">
<title>Sample API tutorial</title>
<meta name="description" content="Guides lead a user through a specific task they want to accomplish, often with a sequence of steps.">

    
    <link rel="icon" href="/favicon.ico" sizes="32x32">
    
      <link rel="icon" href="/favicon.svg" type="image/png">
    
      <link
        rel="apple-touch-icon"
        href="/apple-touch-icon.png"
        sizes="180x180"
        type="image/png"
      >
      <link
        rel="icon"
        href="/favicon-192x192.png"
        sizes="192x192"
        type="image/png"
      >
      <link
        rel="icon"
        href="/favicon-512x512.png"
        sizes="512x512"
        type="image/png"
      >
<link rel="manifest" href="/manifest.webmanifest">
<meta property="og:title" content="API Tutorial">
<meta property="og:description" content="Guides lead a user through a specific task they want to accomplish, often with a sequence of steps.">
<meta property="og:type" content="article">
<meta property="og:url" content="http://localhost:1313/documentation/api-tutorial/"><meta property="og:image" content="http://localhost:1313/pionia.png"><meta property="article:section" content="docs">
<meta property="article:published_time" content="2024-05-24T13:45:48+00:00">
<meta property="article:modified_time" content="2024-07-05T02:12:14+03:00"><meta property="og:site_name" content="Pionia Framework">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://localhost:1313/pionia.png"><meta name="twitter:title" content="API Tutorial">
<meta name="twitter:description" content="Guides lead a user through a specific task they want to accomplish, often with a sequence of steps.">
<meta name="twitter:site" content="@pionia">

    
    
    <script type="application/ld+json">
  {
   "@context": "https://schema.org",
   "@type": "BreadcrumbList",
   "itemListElement": [
     {
       "@type": "ListItem",
       "item": "http://localhost:1313/",
       "name": "Pionia Framework",
       "position": 1
     },
     {
       "@type": "ListItem",
       "item": "http://localhost:1313/docs/",
       "name": "Docs",
       "position": 2
     },
     {
       "@type": "ListItem",
       "item": "http://localhost:1313/docs/documentation/",
       "name": "Documentation",
       "position": 3
     },
     {
       "@type": "ListItem",
       "name": "API Tutorial",
       "position": 4
     }
   ]
 }
</script>





</head>

  
  <body class="single section docs" data-bs-spy="scroll" data-bs-target="#toc" data-bs-root-margin="0px 0px -60%" data-bs-smooth-scroll="true" tabindex="0">
    <div class="sticky-top">
<div class="header-bar"></div>
<header class="navbar navbar-expand-lg">
  <div class="container-sm">
  
    <a class="navbar-brand me-auto me-lg-3" href="/">Pionia</a>

    
    
    <button type="button" id="searchToggleMobile" class="btn btn-link nav-link mx-2 d-lg-none" aria-label="Search website">
      <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
        <circle cx="10" cy="10" r="7"></circle>
        <line x1="21" y1="21" x2="15" y2="15"></line>
      </svg>
    </button>
    
    <button class="btn btn-link d-lg-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavSection" aria-controls="offcanvasNavSection" aria-label="Open section navigation menu">
      <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-dots-vertical" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
        <path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path>
        <path d="M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path>
        <path d="M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path>
      </svg>
    </button>
    <div class="offcanvas offcanvas-start d-lg-none" tabindex="-1" id="offcanvasNavSection" aria-labelledby="offcanvasNavSectionLabel">
      <div class="header-bar"></div>
      <div class="offcanvas-header">
        <h5 class="offcanvas-title" id="offcanvasNavSectionLabel">Docs</h5>
        <button type="button" class="btn btn-link nav-link p-0 ms-auto" data-bs-dismiss="offcanvas" aria-label="Close">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-x" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
            <path d="M18 6l-12 12"></path>
            <path d="M6 6l12 12"></path>
          </svg>
        </button>
      </div>
      <div class="offcanvas-body">
        <aside class="doks-sidebar mt-n3">
          <nav id="doks-docs-nav" aria-label="Tertiary navigation">
            
  
    
<nav class="section-nav docs-links">
  <ul class="list-unstyled">

  <li>
    <details open open>
      <summary>Documentation</summary>
      <ul class="list-unstyled list-nested">

  <li>
      <a href="/documentation/introduction/">Introduction</a>
  </li>

  <li>
      <a href="/documentation/why-pionia/">Why Pionia?</a>
  </li>

  <li>
      <a href="/documentation/application-structure/">Application Structure</a>
  </li>

  <li>
      <a href="/documentation/frontend-integration/">Frontend Integration</a>
  </li>

  <li class="active" >
      <a aria-current="page" href="/documentation/api-tutorial/">API Tutorial</a>
  </li>

  <li>
    <details open>
      <summary>Services</summary>
      <ul class="list-unstyled list-nested">

  <li>
      <a href="/documentation/services/services/">Services</a>
  </li>

  <li>
      <a href="/documentation/services/generic-services/">Generic Services</a>
  </li>

  <li>
      <a href="/documentation/services/advanced-generic-services/">Advanced Generic Services</a>
  </li>
      </ul>
    </details>
  </li>

  <li>
      <a href="/documentation/requests-and-responses/">Requests and Responses</a>
  </li>

  <li>
    <details open>
      <summary>Security</summary>
      <ul class="list-unstyled list-nested">

  <li>
      <a href="/documentation/security/security-authentication-and-authorization/">Security - Authentication and Authorization</a>
  </li>

  <li>
      <a href="/documentation/security/example-jwt-authentication/">Example - JWT Authentication</a>
  </li>
      </ul>
    </details>
  </li>

  <li>
      <a href="/documentation/logging-in-pionia/">Logging in Pionia</a>
  </li>

  <li>
    <details open>
      <summary>Database</summary>
      <ul class="list-unstyled list-nested">

  <li>
      <a href="/documentation/database/configuration-getting-started/">Configuration - Getting Started</a>
  </li>

  <li>
      <a href="/documentation/database/making-queries/">Making Queries</a>
  </li>

  <li>
      <a href="/documentation/database/queries-with-filtering/">Queries with Filtering</a>
  </li>

  <li>
      <a href="/documentation/database/relationships/">Relationships</a>
  </li>

  <li>
      <a href="/documentation/database/using-functions-aggregation/">Using Functions - Aggregation</a>
  </li>
      </ul>
    </details>
  </li>
      </ul>
    </details>
  </li>

  <li>
    <details open>
      <summary>Moonlight Architecture</summary>
      <ul class="list-unstyled list-nested">

  <li>
      <a href="/moonlight/introduction-to-moonlight-architecture/">Introduction to MoonLight Architecture</a>
  </li>

  <li>
      <a href="/moonlight/security-in-moonlight/">Security in moonlight</a>
  </li>

  <li>
      <a href="/moonlight/api-versioning-in-moonlight/">API Versioning in Moonlight</a>
  </li>
      </ul>
    </details>
  </li>
  </ul>
</nav>

  

          </nav>
        </aside>
      </div>
    </div>
    
    <button class="btn btn-link nav-link mx-2 order-3 d-lg-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavMain" aria-controls="offcanvasNavMain" aria-label="Open main navigation menu">
      <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-menu" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
        <line x1="4" y1="8" x2="20" y2="8"></line>
        <line x1="4" y1="16" x2="20" y2="16"></line>
      </svg>
    </button>

    
    <div class="offcanvas offcanvas-end h-auto" tabindex="-1" id="offcanvasNavMain" aria-labelledby="offcanvasNavMainLabel">
      <div class="header-bar d-lg-none"></div>
      <div class="offcanvas-header">
        <h5 class="offcanvas-title" id="offcanvasNavMainLabel">Pionia</h5>
        <button type="button" class="btn btn-link nav-link p-0 ms-auto" data-bs-dismiss="offcanvas" aria-label="Close">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-x" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
            <path d="M18 6l-12 12"></path>
            <path d="M6 6l12 12"></path>
         </svg>
        </button>
      </div>
      
      <div class="offcanvas-body d-flex flex-column flex-lg-row justify-content-between">
        <ul class="navbar-nav flex-grow-1"><li class="nav-item">
                <a class="nav-link" href="http://localhost:1313/documentation/introduction/">Documentation</a>
              </li>
            <li class="nav-item">
                <a class="nav-link" href="http://localhost:1313/moonlight/introduction-to-moonlight-architecture/">Moonlight</a>
              </li>
            <li class="nav-item">
                <a class="nav-link" href="http://localhost:1313/documentation/api-tutorial/">Tutorial</a>
              </li>
            </ul>

        
        
        <button type="button" id="searchToggleDesktop" class="btn btn-link nav-link p-2 d-none d-lg-block" aria-label="Search website">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
            <circle cx="10" cy="10" r="7"></circle>
            <line x1="21" y1="21" x2="15" y2="15"></line>
          </svg>
        </button>
        
        
        
        <button id="buttonColorMode" class="btn btn-link mx-auto nav-link p-0 ms-lg-2 me-lg-1" type="button" aria-label="Toggle theme">
          <svg data-bs-theme-value="dark" xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-moon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
            <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path>
          </svg>
          <svg data-bs-theme-value="light" xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-sun" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
            <path d="M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0m-5 0h1m8 -9v1m8 8h1m-9 8v1m-6.4 -15.4l.7 .7m12.1 -.7l-.7 .7m0 11.4l.7 .7m-12.1 -.7l-.7 .7"></path>
          </svg>
        </button>
        
        <ul id="socialMenu" class="nav mx-auto flex-row order-lg-4">
          <li class="nav-item">
              <a class="nav-link social-link" href="https://github.com/PioniaPHP-project/pionia-docs"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5"></path></svg><small class="ms-2 visually-hidden">GitHub</small></a>
            </li>
          </ul>
        
        <a class="btn btn-primary rounded-pill mt-2 btn-block d-lg-none" href="http://localhost:1313/documentation/introduction/#get-started" role="button">Get started</a>
        </div>
    </div>

    
    <a class="btn btn-primary rounded-pill ms-3 me-2 px-4 order-lg-3 d-none d-lg-block" href="http://localhost:1313/documentation/introduction/#get-started" role="button">Get started</a>
    </div>
</header>
</div>

<div class="modal" id="searchModal" tabindex="-1" aria-labelledby="searchModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-fullscreen-md-down">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5 visually-hidden" id="searchModalLabel">Search</h1>
        <button type="button" class="btn-close visually-hidden" data-bs-dismiss="modal" aria-label="Close"></button>
        <div class="search-input flex-grow-1 d-none">
          <form id="search-form" class="search-form" action="#" method="post" accept-charset="UTF-8" role="search">
            <label for="query" class="visually-hidden">Search</label>
            <div class="d-flex">
              <input type="search" id="query" name="query" class="search-text form-control form-control-lg" placeholder="Search" aria-label="Search" maxlength="128" autocomplete="off">
              <button type="button" class="btn btn-link text-decoration-none px-0 ms-3 d-md-none" data-bs-dismiss="modal" aria-label="Close">Cancel</button>
            </div>
          </form>
        </div>
      </div>
      <div class="modal-body">
        <p class="search-loading status message d-none mt-3 text-center">Loading search indexâ€¦</p>
        <p class="search-no-recent message d-none mt-3 text-center">No recent searches</p>
        <p class="search-no-results message d-none mt-3 text-center">No results for "<strong><span class="query-no-results">Query here</span></strong>"</p>
        <div id="searchResults" class="search-results"></div>
        <template>
          <article class="search-result list-view">
            <div class="card my-3">
              <div class="card-body">
                <header>
                  <h2 class="h5 title title-submitted mb-0"><a class="stretched-link text-decoration-none text-reset" href="#">Title here</a></h2>
                  <div class="submitted"><time class="created-date">Date here</time></div>
                </header>
                <div class="content">Summary here</div>
              </div>
            </div>
          </article>
        </template>
      </div>
      <div class="modal-footer">
        <ul class="list-inline me-auto d-none d-md-block">
          <li class="list-inline-item"><kbd class="me-2"><svg width="15" height="15" aria-label="Enter key" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M12 3.53088v3c0 1-1 2-2 2H4M7 11.53088l-3-3 3-3"></path></g></svg></kbd><span class="DocSearch-Label">to select</span></li>
          <li class="list-inline-item"><kbd class="me-2"><svg width="15" height="15" aria-label="Arrow down" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M7.5 3.5v8M10.5 8.5l-3 3-3-3"></path></g></svg></kbd><kbd class="me-2"><svg width="15" height="15" aria-label="Arrow up" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M7.5 11.5v-8M10.5 6.5l-3-3-3 3"></path></g></svg></kbd><span class="DocSearch-Label">to navigate</span></li>
          <li class="list-inline-item"><kbd class="me-2"><svg width="15" height="15" aria-label="Escape key" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M13.6167 8.936c-.1065.3583-.6883.962-1.4875.962-.7993 0-1.653-.9165-1.653-2.1258v-.5678c0-1.2548.7896-2.1016 1.653-2.1016.8634 0 1.3601.4778 1.4875 1.0724M9 6c-.1352-.4735-.7506-.9219-1.46-.8972-.7092.0246-1.344.57-1.344 1.2166s.4198.8812 1.3445.9805C8.465 7.3992 8.968 7.9337 9 8.5c.032.5663-.454 1.398-1.4595 1.398C6.6593 9.898 6 9 5.963 8.4851m-1.4748.5368c-.2635.5941-.8099.876-1.5443.876s-1.7073-.6248-1.7073-2.204v-.4603c0-1.0416.721-2.131 1.7073-2.131.9864 0 1.6425 1.031 1.5443 2.2492h-2.956"></path></g></svg></kbd><span class="DocSearch-Label">to close</span></li>
        </ul>
        <p class="d-md-none">Search by <a class="text-decoration-none" href="https://github.com/nextapps-de/flexsearch">FlexSearch</a></p>
      </div>
    </div>
  </div>
</div>


    <div class="wrap container-sm" role="document">
      <div class="content">
      
        
	<div class="row flex-xl-nowrap">
		<div class="col-lg-5 col-xl-4 docs-sidebar docs-sidebar-offset d-none d-lg-block">
			
  
    
<nav class="section-nav docs-links">
  <ul class="list-unstyled">

  <li>
    <details open open>
      <summary>Documentation</summary>
      <ul class="list-unstyled list-nested">

  <li>
      <a href="/documentation/introduction/">Introduction</a>
  </li>

  <li>
      <a href="/documentation/why-pionia/">Why Pionia?</a>
  </li>

  <li>
      <a href="/documentation/application-structure/">Application Structure</a>
  </li>

  <li>
      <a href="/documentation/frontend-integration/">Frontend Integration</a>
  </li>

  <li class="active" >
      <a aria-current="page" href="/documentation/api-tutorial/">API Tutorial</a>
  </li>

  <li>
    <details open>
      <summary>Services</summary>
      <ul class="list-unstyled list-nested">

  <li>
      <a href="/documentation/services/services/">Services</a>
  </li>

  <li>
      <a href="/documentation/services/generic-services/">Generic Services</a>
  </li>

  <li>
      <a href="/documentation/services/advanced-generic-services/">Advanced Generic Services</a>
  </li>
      </ul>
    </details>
  </li>

  <li>
      <a href="/documentation/requests-and-responses/">Requests and Responses</a>
  </li>

  <li>
    <details open>
      <summary>Security</summary>
      <ul class="list-unstyled list-nested">

  <li>
      <a href="/documentation/security/security-authentication-and-authorization/">Security - Authentication and Authorization</a>
  </li>

  <li>
      <a href="/documentation/security/example-jwt-authentication/">Example - JWT Authentication</a>
  </li>
      </ul>
    </details>
  </li>

  <li>
      <a href="/documentation/logging-in-pionia/">Logging in Pionia</a>
  </li>

  <li>
    <details open>
      <summary>Database</summary>
      <ul class="list-unstyled list-nested">

  <li>
      <a href="/documentation/database/configuration-getting-started/">Configuration - Getting Started</a>
  </li>

  <li>
      <a href="/documentation/database/making-queries/">Making Queries</a>
  </li>

  <li>
      <a href="/documentation/database/queries-with-filtering/">Queries with Filtering</a>
  </li>

  <li>
      <a href="/documentation/database/relationships/">Relationships</a>
  </li>

  <li>
      <a href="/documentation/database/using-functions-aggregation/">Using Functions - Aggregation</a>
  </li>
      </ul>
    </details>
  </li>
      </ul>
    </details>
  </li>

  <li>
    <details open>
      <summary>Moonlight Architecture</summary>
      <ul class="list-unstyled list-nested">

  <li>
      <a href="/moonlight/introduction-to-moonlight-architecture/">Introduction to MoonLight Architecture</a>
  </li>

  <li>
      <a href="/moonlight/security-in-moonlight/">Security in moonlight</a>
  </li>

  <li>
      <a href="/moonlight/api-versioning-in-moonlight/">API Versioning in Moonlight</a>
  </li>
      </ul>
    </details>
  </li>
  </ul>
</nav>

  

		</div>
		
		<nav class="docs-toc docs-toc-offset d-none d-xl-block col-xl-3" aria-label="Secondary navigation">
			<div class="page-links">
  <h3>On this page</h3>
    <nav id="toc">
  <ul>
    <li><a href="#out-target">Out Target</a>
      <ul>
        <li><a href="#prerequisites">Prerequisites</a></li>
        <li><a href="#step-1-initialize-the-project">Step 1: Initialize the project</a></li>
        <li><a href="#step-2-connect-to-a-database">Step 2: Connect to a database</a></li>
        <li><a href="#step-3-create-the-service---todoservice">Step 3: Create the service - <code>TodoService</code></a></li>
        <li><a href="#step-4-create-or-update-a-to-do-item-in-the-database---1st-action">Step 4: Create or update a to-do item in the database - 1st action.</a></li>
        <li><a href="#step-5-retrieve-all-to-do-items-from-the-database---2nd-action">Step 5: Retrieve all to-do items from the database - 2nd action.</a></li>
        <li><a href="#step-6-retrieve-a-single-to-do-item-from-the-database---3rd-action">Step 6: Retrieve a single to-do item from the database - 3rd action.</a></li>
        <li><a href="#step-7-grab-n-random-to-do-items-from-the-database---7th-action">Step 7: Grab n random to-do item[s] from the database - 7th action.</a></li>
        <li><a href="#step-8-delete-a-to-do-item-from-the-database---5th-action">Step 8: Delete a to-do item from the database - 5th action.</a></li>
        <li><a href="#full-service-source-code">Full Service Source Code</a></li>
      </ul>
    </li>
    <li><a href="#post-tutorial----what-next">Post Tutorial &ndash; What Next?</a></li>
  </ul>
</nav>
</div>

		</nav>
		<main class="docs-content col-lg-11 col-xl-9">
		
			<h1>API Tutorial</h1>
			
			<nav class="toc-mobile d-xl-none" aria-label="Quaternary navigation">
				<details>
    <summary>On this page</summary>
    <div class="page-links">
      <nav id="TableOfContents">
  <ul>
    <li><a href="#out-target">Out Target</a>
      <ul>
        <li><a href="#prerequisites">Prerequisites</a></li>
        <li><a href="#step-1-initialize-the-project">Step 1: Initialize the project</a></li>
        <li><a href="#step-2-connect-to-a-database">Step 2: Connect to a database</a></li>
        <li><a href="#step-3-create-the-service---todoservice">Step 3: Create the service - <code>TodoService</code></a></li>
        <li><a href="#step-4-create-or-update-a-to-do-item-in-the-database---1st-action">Step 4: Create or update a to-do item in the database - 1st action.</a></li>
        <li><a href="#step-5-retrieve-all-to-do-items-from-the-database---2nd-action">Step 5: Retrieve all to-do items from the database - 2nd action.</a></li>
        <li><a href="#step-6-retrieve-a-single-to-do-item-from-the-database---3rd-action">Step 6: Retrieve a single to-do item from the database - 3rd action.</a></li>
        <li><a href="#step-7-grab-n-random-to-do-items-from-the-database---7th-action">Step 7: Grab n random to-do item[s] from the database - 7th action.</a></li>
        <li><a href="#step-8-delete-a-to-do-item-from-the-database---5th-action">Step 8: Delete a to-do item from the database - 5th action.</a></li>
        <li><a href="#full-service-source-code">Full Service Source Code</a></li>
      </ul>
    </li>
    <li><a href="#post-tutorial----what-next">Post Tutorial &ndash; What Next?</a></li>
  </ul>
</nav>
    </div>
  </details>

			</nav>
			<div class="callout callout-tip d-flex flex-row mt-4 mb-4 pt-4 pe-4 pb-2 ps-3">
  
  <div class="callout-content">
    
    <div class="callout-body">
      <p>This section assumes that you have already setup your pinia framework project. If you haven&rsquo;t done done, please head over to <a href="/documentation/introduction/#installation">Installation</a>.</p>
<p>This guide also introduces you to the implementation of the <a href="/moonlight/introduction-to-moonlight-architecture/">Moonlight architecture</a>, so you can check it out first to get familiar with the terminologies.</p>

    </div>
  </div>
</div>

<h2 id="out-target">Out Target<a href="#out-target" class="anchor" aria-hidden="true">#</a> </h2>
<p>We should be able to accomplish the following tasks by the end of this tutorial:</p>
<ol>
<li><input disabled="" type="checkbox"> Intialise the project.</li>
<li><input disabled="" type="checkbox"> Connect to a database.</li>
<li><input disabled="" type="checkbox"> Create a service.</li>
<li><input disabled="" type="checkbox"> Create or update a to-do item in the database.</li>
<li><input disabled="" type="checkbox"> Retrieve all to-do items from the database.</li>
<li><input disabled="" type="checkbox"> Retrieve a single to-do item from the database.</li>
<li><input disabled="" type="checkbox"> Retrieve n random to-do item[s] from the database.</li>
<li><input disabled="" type="checkbox"> Delete a to-do item from the database.</li>
</ol>
<h3 id="prerequisites">Prerequisites<a href="#prerequisites" class="anchor" aria-hidden="true">#</a> </h3>
<ul>
<li>You should have a basic understanding of PHP.</li>
<li>You should have postman installed on your machine for testing the API.</li>
<li>You should have a database created already.</li>
</ul>
<h3 id="step-1-initialize-the-project">Step 1: Initialize the project<a href="#step-1-initialize-the-project" class="anchor" aria-hidden="true">#</a> </h3>
<p>To create a new project, you need to run the following command in the directory you want your project to be created. We are calling ours <code>todo_api</code>.</p>



<div class="expressive-code">
  <figure class="frame is-terminal not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">composer create-project pionia/pionia-app todo_api</span></span></code></pre></div>
  </figure>
</div>
<p>We can open the project in our favorite code editor or IDE, for this tutorial we will be using PhPStorm IDE.</p>
<blockquote>
<p>All IDEs and Editors should be okay to use since Pionia is powered by PHP that is supported by most of the IDEs.</p>
</blockquote>
<p>For explanation of the directories and scripts, please refer to the <a href="/documentation/structure/">Structure Section of this documentation</a>.</p>
<ul>
<li><input checked="" disabled="" type="checkbox"> Intialise the project(Completed)</li>
</ul>
<h3 id="step-2-connect-to-a-database">Step 2: Connect to a database<a href="#step-2-connect-to-a-database" class="anchor" aria-hidden="true">#</a> </h3>
<p>Pionia removes the section of models and migrations and instead uses a simple and lightweight query builder to <a href="/documentation/database">interact with the database - PORM</a>.</p>
<p>At its heart, PORM is a wrapper on top of <a href="https://medoo.in/">medoo</a>, a lightweight database framework that makes interacting with the database easy and fun.</p>
<blockquote>
<p>You can create a new database or use an existing one as you see fit!</p>
</blockquote>
<p>Assuming you have already setup your MySQL database.</p>
<p>Let&rsquo;s first create our MySQL database as below:</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">CREATE</span><span class="w"> </span><span class="k">DATABASE</span><span class="w"> </span><span class="n">todo_db</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">USE</span><span class="w"> </span><span class="n">todo_db</span><span class="p">;</span></span></span></code></pre></div>
  </figure>
</div>
<p>Then we can create a table called <code>todos</code> as below:</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">exists</span><span class="w"> </span><span class="n">todos</span><span class="w"> </span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">id</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="n">auto_increment</span><span class="w"> </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">title</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">description</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">created_at</span><span class="w"> </span><span class="k">timestamp</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="k">CURRENT_TIMESTAMP</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">desc</span><span class="w"> </span><span class="n">todos</span><span class="p">;</span></span></span></code></pre></div>
  </figure>
</div>
<p>Above should return the following:</p>
<p>

<img
  src="/docs/documentation/image-2_hu4dad5564134102577650cc29b7cde609_37567_1186x256_resize_q85_h2_lanczos_3.webp"
  width="1186"
  height="256"
  decoding="async"
  fetchpriority="auto"
  loading="lazy"
  alt="alt text"id="h-rh-i-0"
/></p>
<p>Open <code>settings.ini</code> file and update the database settings as below:</p>



<div class="expressive-code">
  <figure class="frame has-title not-content">
  <figcaption class="header">
    <span class="title">settings.ini</span>
  </figcaption>
  <div class="highlight" title="settings.ini"><pre tabindex="0" class="chroma"><code class="language-ini" data-lang="ini"><span class="line"><span class="cl"><span class="k">[db]</span>
</span></span><span class="line"><span class="cl"><span class="na">database</span> <span class="o">=</span> <span class="s">&#34;todo_db&#34; # your database name</span>
</span></span><span class="line"><span class="cl"><span class="na">username</span> <span class="o">=</span> <span class="s">&#34;root&#34; # your database user</span>
</span></span><span class="line"><span class="cl"><span class="na">type</span> <span class="o">=</span> <span class="s">&#34;mysql&#34; # your database type</span>
</span></span><span class="line"><span class="cl"><span class="na">host</span> <span class="o">=</span> <span class="s">&#34;localhost&#34;</span>
</span></span><span class="line"><span class="cl"><span class="na">password</span> <span class="o">=</span> <span class="s">&#34;&#34; # your database password</span>
</span></span><span class="line"><span class="cl"><span class="na">port</span> <span class="o">=</span> <span class="s">3306</span></span></span></code></pre></div>
  </figure>
</div>
<ul>
<li><input checked="" disabled="" type="checkbox"> Connect to a database(Completed)</li>
</ul>
<p>Throughout this tutorial, we will be creating everything manually, however, pionia cli can be used to create most of the staff for you.</p>
<p>Just run the following command in your terminal to see the available commands.</p>



<div class="expressive-code">
  <figure class="frame is-terminal not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">php pionia</span></span></code></pre></div>
  </figure>
</div>
<h3 id="step-3-create-the-service---todoservice">Step 3: Create the service - <code>TodoService</code><a href="#step-3-create-the-service---todoservice" class="anchor" aria-hidden="true">#</a> </h3>
<p>Since all our business logic is related to To-do items, we only need one service called <code>TodoService</code>. Head over to services directory and add the following code to <code>TodoService.php</code>. All our services should extend <code>BaseRestService</code> class.</p>



<div class="expressive-code">
  <figure class="frame has-title not-content">
  <figcaption class="header">
    <span class="title">TodoService.php</span>
  </figcaption>
  <div class="highlight" title="TodoService.php"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="o">&lt;?</span><span class="nx">php</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">namespace</span> <span class="nx">application\services</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">use</span> <span class="nx">Pionia\request\BaseRestService</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">TodoService</span> <span class="k">extends</span> <span class="nx">BaseRestService</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
  </figure>
</div>
<p>After creating our service, we need to register it in the <code>MainApiSwitch</code> class. Open <code>MainApiSwitch.php</code> and add the following code:</p>



<div class="expressive-code">
  <figure class="frame has-title not-content">
  <figcaption class="header">
    <span class="title">MainApiSwitch.php</span>
  </figcaption>
  <div class="highlight" title="MainApiSwitch.php"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="k">public</span> <span class="k">function</span> <span class="nf">registerServices</span><span class="p">()</span><span class="o">:</span> <span class="k">array</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;user&#39;</span> <span class="o">=&gt;</span> <span class="nx">UserService</span><span class="o">::</span><span class="na">class</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;todo&#34;</span> <span class="o">=&gt;</span> <span class="nx">TodoService</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="c1">// add this line here
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span></span></span></code></pre></div>
  </figure>
</div>
<p>Now our service is discoverable by the framework.</p>
<ul>
<li><input checked="" disabled="" type="checkbox"> Create the service(Completed)</li>
</ul>
<h3 id="step-4-create-or-update-a-to-do-item-in-the-database---1st-action">Step 4: Create or update a to-do item in the database - 1st action.<a href="#step-4-create-or-update-a-to-do-item-in-the-database---1st-action" class="anchor" aria-hidden="true">#</a> </h3>
<p>We create our first action in our service called &lsquo;createOrUpdate&rsquo;. This action will be responsible for creating a new to-do item in the database or update an existing one if an id is provided.</p>



<div class="expressive-code">
  <figure class="frame has-title not-content">
  <figcaption class="header">
    <span class="title">TodoService.php</span>
  </figcaption>
  <div class="highlight" title="TodoService.php"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="k">namespace</span> <span class="nx">application\services</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">use</span> <span class="nx">Pionia\request\BaseRestService</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">TodoService</span> <span class="k">extends</span> <span class="nx">BaseRestService</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">public</span> <span class="k">function</span> <span class="nf">createOrUpdate</span><span class="p">(</span><span class="nv">$data</span><span class="p">)</span> <span class="o">:</span> <span class="nx">BaseResponse</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$title</span> <span class="o">=</span> <span class="nv">$data</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$description</span> <span class="o">=</span> <span class="nv">$data</span><span class="p">[</span><span class="s1">&#39;description&#39;</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$id</span> <span class="o">=</span> <span class="nv">$data</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">??</span> <span class="k">null</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$id</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// here we can create
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="nv">$saved</span> <span class="o">=</span> <span class="nx">Porm</span><span class="o">::</span><span class="na">from</span><span class="p">(</span><span class="s2">&#34;todos&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="o">-&gt;</span><span class="na">save</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">                    <span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="nv">$title</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="s1">&#39;description&#39;</span> <span class="o">=&gt;</span> <span class="nv">$description</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="p">]);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// here we can update
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="nx">Porm</span><span class="o">::</span><span class="na">from</span><span class="p">(</span><span class="s2">&#34;todos&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="o">-&gt;</span><span class="na">update</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">                    <span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="nv">$title</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="s1">&#39;description&#39;</span> <span class="o">=&gt;</span> <span class="nv">$description</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="p">],</span> <span class="nv">$id</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="nv">$saved</span> <span class="o">=</span> <span class="nx">Porm</span><span class="o">::</span><span class="na">from</span><span class="p">(</span><span class="s2">&#34;todos&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nv">$id</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nx">BaseResponse</span><span class="o">::</span><span class="na">JsonResponse</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s2">&#34;Todo </span><span class="si">$saved-&gt;title</span><span class="s2"> created.&#34;</span><span class="p">,</span> <span class="nv">$saved</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
  </figure>
</div>
<p>Sending the request using any client of choice.</p>






<nav>
  <div class="nav nav-tabs" id="nav-tab" role="tablist">
  <button data-toggle-tab="jet-fetch json" class="nav-link active" id="tabs-test-the-api-0-tab" data-bs-toggle="tab" data-bs-target="#tabs-test-the-api-0" type="button" role="tab" aria-controls="tabs-test-the-api-0" aria-selected="true">
      jet-fetch JSON</button>
  <button data-toggle-tab="axios formdata(postman)" class="nav-link" id="tabs-test-the-api-1-tab" data-bs-toggle="tab" data-bs-target="#tabs-test-the-api-1" type="button" role="tab" aria-controls="tabs-test-the-api-1" aria-selected="true">
      Axios FormData(postman)</button>
  <button data-toggle-tab="axios json data(postman)" class="nav-link" id="tabs-test-the-api-2-tab" data-bs-toggle="tab" data-bs-target="#tabs-test-the-api-2" type="button" role="tab" aria-controls="tabs-test-the-api-2" aria-selected="true">
      Axios JSON Data(Postman)</button>
  <button data-toggle-tab="xhr -json (postman)" class="nav-link" id="tabs-test-the-api-3-tab" data-bs-toggle="tab" data-bs-target="#tabs-test-the-api-3" type="button" role="tab" aria-controls="tabs-test-the-api-3" aria-selected="true">
      XHR -JSON (Postman)</button>
  </div>
</nav>

<div class="tab-content" id="nav-tabContent">
  <div data-pane="jet-fetch json" class="tab-pane fade show active" id="tabs-test-the-api-0" role="tabpanel" aria-labelledby="tabs-test-the-api-0-tab" tabindex="0">
      


<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">Jet</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;jet-fetch&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">jet</span> <span class="o">=</span>  <span class="k">new</span> <span class="nx">Jet</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">  <span class="nx">baseUrl</span><span class="o">:</span> <span class="s1">&#39;http://localhost:8000/api/&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl"><span class="nx">jet</span>
</span></span><span class="line"><span class="cl">  <span class="p">.</span><span class="nx">moonlightRequest</span><span class="p">({</span><span class="nx">SERVICE</span><span class="o">:</span> <span class="s1">&#39;todo&#39;</span><span class="p">,</span> <span class="nx">ACTION</span><span class="o">:</span> <span class="s1">&#39;createOrUpdate&#39;</span><span class="p">,</span> <span class="nx">title</span><span class="o">:</span> <span class="s1">&#39;Pass this &#39;</span><span class="p">,</span> <span class="nx">description</span><span class="o">:</span> <span class="s1">&#39;Must pass&#39;</span> <span class="p">},</span> <span class="s1">&#39;v1&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="kr">const</span> <span class="p">{</span> <span class="nx">returnCode</span><span class="p">,</span> <span class="nx">returnMessage</span><span class="p">,</span> <span class="nx">returnData</span><span class="p">,</span> <span class="nx">extraData</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">returnCode</span><span class="p">,</span> <span class="nx">returnMessage</span><span class="p">,</span> <span class="nx">returnData</span><span class="p">,</span> <span class="nx">extraData</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">}).</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span></span></span></code></pre></div>
  </figure>
</div>
</div>
  <div data-pane="axios formdata(postman)" class="tab-pane fade" id="tabs-test-the-api-1" role="tabpanel" aria-labelledby="tabs-test-the-api-1-tab" tabindex="0">
      


<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">axios</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;axios&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">FormData</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;form-data&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="kd">let</span> <span class="nx">data</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FormData</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">  <span class="nx">data</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;Pass this &#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nx">data</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">&#39;description&#39;</span><span class="p">,</span> <span class="s1">&#39;Must pass this&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nx">data</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">&#39;SERVICE&#39;</span><span class="p">,</span> <span class="s1">&#39;todo&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nx">data</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">&#39;ACTION&#39;</span><span class="p">,</span> <span class="s1">&#39;create&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kd">let</span> <span class="nx">config</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">method</span><span class="o">:</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">maxBodyLength</span><span class="o">:</span> <span class="kc">Infinity</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">url</span><span class="o">:</span> <span class="s1">&#39;http://localhost:8000/api/v1/&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">headers</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="p">...</span><span class="nx">data</span><span class="p">.</span><span class="nx">getHeaders</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="nx">data</span> <span class="o">:</span> <span class="nx">data</span>
</span></span><span class="line"><span class="cl">  <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nx">axios</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="nx">config</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span><span class="line"><span class="cl">  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span></span></span></code></pre></div>
  </figure>
</div>
</div>
  <div data-pane="axios json data(postman)" class="tab-pane fade" id="tabs-test-the-api-2" role="tabpanel" aria-labelledby="tabs-test-the-api-2-tab" tabindex="0">
      


<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">axios</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;axios&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="kd">let</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;SERVICE&#34;</span><span class="o">:</span> <span class="s2">&#34;todo&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;ACTION&#34;</span><span class="o">:</span> <span class="s2">&#34;create&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;title&#34;</span><span class="o">:</span> <span class="s2">&#34;Become an avenger&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;description&#34;</span><span class="o">:</span> <span class="s2">&#34;Make sure you become an avenger at 10!&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kd">let</span> <span class="nx">config</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">method</span><span class="o">:</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">maxBodyLength</span><span class="o">:</span> <span class="kc">Infinity</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">url</span><span class="o">:</span> <span class="s1">&#39;http://localhost:8000/api/v1/&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">headers</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="s1">&#39;Content-Type&#39;</span><span class="o">:</span> <span class="s1">&#39;application/json&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="nx">data</span> <span class="o">:</span> <span class="nx">data</span>
</span></span><span class="line"><span class="cl">  <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nx">axios</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="nx">config</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span><span class="line"><span class="cl">  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span></span></span></code></pre></div>
  </figure>
</div>
</div>
  <div data-pane="xhr -json (postman)" class="tab-pane fade" id="tabs-test-the-api-3" role="tabpanel" aria-labelledby="tabs-test-the-api-3-tab" tabindex="0">
      


<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl">  <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;SERVICE&#34;</span><span class="o">:</span> <span class="s2">&#34;todo&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;ACTION&#34;</span><span class="o">:</span> <span class="s2">&#34;create&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;title&#34;</span><span class="o">:</span> <span class="s2">&#34;Become an avenger&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;description&#34;</span><span class="o">:</span> <span class="s2">&#34;Make sure you become an avenger at 10!&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;id&#34;</span><span class="o">:</span> <span class="mi">2</span> <span class="c1">// this is optional, only pass it to update.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kd">var</span> <span class="nx">xhr</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">XMLHttpRequest</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">  <span class="nx">xhr</span><span class="p">.</span><span class="nx">withCredentials</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nx">xhr</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&#34;readystatechange&#34;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">===</span> <span class="mi">4</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">responseText</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nx">xhr</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s2">&#34;POST&#34;</span><span class="p">,</span> <span class="s2">&#34;http://localhost:8000/api/v1/&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nx">xhr</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="s2">&#34;Content-Type&#34;</span><span class="p">,</span> <span class="s2">&#34;application/json&#34;</span><span class="p">);</span></span></span></code></pre></div>
  </figure>
</div>
</div>
  </div>

<p>On Successful execution, the above code should return the following:</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;returnCode&#34;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;returnMessage&#34;</span><span class="p">:</span> <span class="s2">&#34;Todo Become an avenger created.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;returnData&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;id&#34;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;title&#34;</span><span class="p">:</span> <span class="s2">&#34;Become an avenger&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;description&#34;</span><span class="p">:</span> <span class="s2">&#34;Make sure you become an avenger at 10!&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;created_at&#34;</span><span class="p">:</span> <span class="s2">&#34;2024-05-26 00:11:23&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;extraData&#34;</span><span class="p">:</span> <span class="s2">&#34;2&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
  </figure>
</div>
<p>And in the database, we should have the following:</p>
<p>

<img
  src="/docs/documentation/image-4_hu80c7c829a1ac4a5cb38c3fa886e0c14f_40089_1384x154_resize_q85_h2_lanczos_3.webp"
  width="1384"
  height="154"
  decoding="async"
  fetchpriority="auto"
  loading="lazy"
  alt="Database record insertation"id="h-rh-i-1"
/></p>
<div class="callout callout-note d-flex flex-row mt-4 mb-4 pt-4 pe-4 pb-2 ps-3">
  
  <div class="callout-content">
    
    <div class="callout-body">
      <p>Before we proceed, let&rsquo;s first understand what just happened above.</p>

    </div>
  </div>
</div>

<p>When you hit the endpoint <code>http://localhost:8000/api/v1/</code> with the data as shown above, the request came via our <code>index.php</code>, which checked out routes. We only have one route as follows:-</p>



<div class="expressive-code">
  <figure class="frame has-title not-content">
  <figcaption class="header">
    <span class="title">routes.php</span>
  </figcaption>
  <div class="highlight" title="routes.php"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">$router</span><span class="o">-&gt;</span><span class="na">addSwitchFor</span><span class="p">(</span><span class="s1">&#39;application\switches\MainApiSwitch&#39;</span><span class="p">,</span> <span class="s1">&#39;v1&#39;</span><span class="p">);</span></span></span></code></pre></div>
  </figure>
</div>
<p>The above route implies that all requests to <code>http://localhost:8000/api/v1/</code> should be handled by the <code>MainApiSwitch</code> switch.</p>
<p>The main api switch checks in the request body for the <code>SERVICE</code> and <code>ACTION</code> keys.
If they are not found, it throws an exception. If they are found, it maps the request to the service and action mentioned basing on the registered services.
Therefore, for your service to be discovered, you must register it <a href="#step-3-create-the-service---todoservice">as we did here</a>.</p>



<div class="expressive-code">
  <figure class="frame has-title not-content">
  <figcaption class="header">
    <span class="title">MainApiSwitch.php</span>
  </figcaption>
  <div class="highlight" title="MainApiSwitch.php"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl">  <span class="k">public</span> <span class="k">function</span> <span class="nf">registerServices</span><span class="p">()</span><span class="o">:</span> <span class="k">array</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;user&#39;</span> <span class="o">=&gt;</span> <span class="nx">UserService</span><span class="o">::</span><span class="na">class</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;todo&#34;</span> <span class="o">=&gt;</span> <span class="nx">TodoService</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="c1">// this is our service.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span></span></span></code></pre></div>
  </figure>
</div>
<p>So, after here, the service needed is loaded and the entire request in forwarded to it. When the service receives the request, it checks for the action mentioned in the request body. If the action is not found, it throws an exception. If the action is found, it executes the action and returns a response back to the MainApiSwitch which then returns the response to the controller which then returns the response to the kernel that does final processing and returns the response to the client.</p>
<ul>
<li><input checked="" disabled="" type="checkbox"> Create or update a to-do item in the database(Completed)</li>
</ul>
<h3 id="step-5-retrieve-all-to-do-items-from-the-database---2nd-action">Step 5: Retrieve all to-do items from the database - 2nd action.<a href="#step-5-retrieve-all-to-do-items-from-the-database---2nd-action" class="anchor" aria-hidden="true">#</a> </h3>
<p>We created our todo from the above step, please first take time to create as many as you want.</p>
<p>Now, let&rsquo;s create an action called <code>all</code> in our service to retrieve all to-do items from the database.</p>



<div class="expressive-code">
  <figure class="frame has-title not-content">
  <figcaption class="header">
    <span class="title">TodoService.php</span>
  </figcaption>
  <div class="highlight" title="TodoService.php"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="c1">## ..rest of the service code
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">public</span> <span class="k">function</span> <span class="nf">all</span><span class="p">()</span> <span class="o">:</span> <span class="nx">BaseResponse</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nv">$data</span> <span class="o">=</span> <span class="nx">Por</span><span class="o">::</span><span class="na">from</span><span class="p">(</span><span class="s2">&#34;todos&#34;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">      <span class="k">return</span> <span class="nx">BaseResponse</span><span class="o">::</span><span class="na">JsonResponse</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s2">&#34;Todos found.&#34;</span><span class="p">,</span> <span class="nv">$data</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">## rest of the service code...
</span></span></span></code></pre></div>
  </figure>
</div>
<p>Now, let&rsquo;s change our JSON in postman to the following:</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;SERVICE&#34;</span><span class="p">:</span> <span class="s2">&#34;todo&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;ACTION&#34;</span><span class="p">:</span> <span class="s2">&#34;all&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
  </figure>
</div>
<p>Send the request and you should get the following response:</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;returnCode&#34;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;returnMessage&#34;</span><span class="p">:</span> <span class="s2">&#34;Todos found.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;returnData&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;id&#34;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;title&#34;</span><span class="p">:</span> <span class="s2">&#34;Pass this &#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;description&#34;</span><span class="p">:</span> <span class="s2">&#34;Must pass this&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;created_at&#34;</span><span class="p">:</span> <span class="s2">&#34;2024-05-26 00:04:17&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;id&#34;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;title&#34;</span><span class="p">:</span> <span class="s2">&#34;Become an avenger&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;description&#34;</span><span class="p">:</span> <span class="s2">&#34;Make sure you become an avenger at 10!&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;created_at&#34;</span><span class="p">:</span> <span class="s2">&#34;2024-05-26 00:11:23&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;extraData&#34;</span><span class="p">:</span> <span class="kc">null</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
  </figure>
</div>
<div class="callout callout-tip d-flex flex-row mt-4 mb-4 pt-4 pe-4 pb-2 ps-3">
  <svg class="outline/pencil svg-inline callout-icon me-2 mb-3"  xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" ><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 20h4L18.5 9.5a2.828 2.828.0 10-4-4L4 16v4"/><path d="M13.5 6.5l4 4"/></svg>
  <div class="callout-content">
    <div class="callout-title">
        <p>Point To Ponder</p>

      </div>
    <div class="callout-body">
      <p>Notice how the <code>returnData</code> is an array yet it was an object in the previous response. <code>returnData</code> and <code>extraData</code> can be of any type, it is up to you to decide what to return in them.</p>
<p>You can also omit the message by setting it to null which should be logical for cases of listing items.</p>

    </div>
  </div>
</div>

<ul>
<li><input checked="" disabled="" type="checkbox"> Retrieve all to-do items from the database(Completed)</li>
</ul>
<h3 id="step-6-retrieve-a-single-to-do-item-from-the-database---3rd-action">Step 6: Retrieve a single to-do item from the database - 3rd action.<a href="#step-6-retrieve-a-single-to-do-item-from-the-database---3rd-action" class="anchor" aria-hidden="true">#</a> </h3>
<p>We will create an action called <code>one</code> in our service to retrieve a single to-do item from the database.</p>



<div class="expressive-code">
  <figure class="frame has-title not-content">
  <figcaption class="header">
    <span class="title">TodoService.php</span>
  </figcaption>
  <div class="highlight" title="TodoService.php"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="c1">## ..rest of the service code
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="sd">/**
</span></span></span><span class="line"><span class="cl"><span class="sd">   * @throws DatabaseException
</span></span></span><span class="line"><span class="cl"><span class="sd">   */</span>
</span></span><span class="line"><span class="cl">  <span class="k">public</span> <span class="k">function</span> <span class="nf">one</span><span class="p">(</span><span class="nv">$data</span><span class="p">)</span> <span class="o">:</span> <span class="nx">BaseResponse</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nv">$id</span> <span class="o">=</span> <span class="nv">$data</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="nv">$res</span> <span class="o">=</span> <span class="nx">Porm</span><span class="o">::</span><span class="na">from</span><span class="p">(</span><span class="s1">&#39;todos&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nv">$id</span><span class="p">);</span> <span class="c1">// or Porm::from(&#39;todos&#39;)-&gt;get([&#39;id&#39; =&gt; $id]);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">      <span class="k">if</span> <span class="p">(</span><span class="nv">$res</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="k">return</span> <span class="nx">BaseResponse</span><span class="o">::</span><span class="na">JsonResponse</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="k">null</span><span class="p">,</span> <span class="nv">$data</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="k">throw</span> <span class="k">new</span> <span class="nx">DatabaseException</span><span class="p">(</span><span class="s2">&#34;No todo with id </span><span class="si">$id</span><span class="s2"> found.&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="c1">## ..rest of the service code
</span></span></span></code></pre></div>
  </figure>
</div>
<p>Here we are going to test two scenarios, one is where everything goes smoothly and the other is where the server panics(throws an exception).</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;SERVICE&#34;</span><span class="p">:</span><span class="s2">&#34;todo&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;ACTION&#34;</span><span class="p">:</span> <span class="s2">&#34;one&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;id&#34;</span><span class="p">:</span> <span class="mi">2</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
  </figure>
</div>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;SERVICE&#34;</span><span class="p">:</span> <span class="s2">&#34;todo&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;ACTION&#34;</span><span class="p">:</span> <span class="s2">&#34;one&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;id&#34;</span><span class="p">:</span> <span class="mi">100</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
  </figure>
</div>
<p>In the first scenario, we get back a status code of 200 OK but with the following response.</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;returnCode&#34;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;returnMessage&#34;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;returnData&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;SERVICE&#34;</span><span class="p">:</span> <span class="s2">&#34;todo&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;ACTION&#34;</span><span class="p">:</span> <span class="s2">&#34;one&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;id&#34;</span><span class="p">:</span> <span class="mi">2</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;extraData&#34;</span><span class="p">:</span> <span class="kc">null</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
  </figure>
</div>
<p>But in the second scenario, we still get a status code of 200 OK but with the following response.</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;returnCode&#34;</span><span class="p">:</span> <span class="mi">400</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;returnMessage&#34;</span><span class="p">:</span> <span class="s2">&#34;No todo with id 100 found.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;returnData&#34;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;extraData&#34;</span><span class="p">:</span> <span class="kc">null</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
  </figure>
</div>
<div class="callout callout-tip d-flex flex-row mt-4 mb-4 pt-4 pe-4 pb-2 ps-3">
  <svg class="outline/pencil svg-inline callout-icon me-2 mb-3"  xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" ><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 20h4L18.5 9.5a2.828 2.828.0 10-4-4L4 16v4"/><path d="M13.5 6.5l4 4"/></svg>
  <div class="callout-content">
    <div class="callout-title">
        <p>Point To Ponder</p>

      </div>
    <div class="callout-body">
      <p>Notice how the exception message becomes our <code>returnMessage</code>. This exception was caught by our switch. Therefore, wherever you&rsquo;re in the services, feel free to throw any exceptions with clean messages.</p>

    </div>
  </div>
</div>

<ul>
<li><input checked="" disabled="" type="checkbox"> Retrieve a single to-do item from the database(Completed)</li>
</ul>
<h3 id="step-7-grab-n-random-to-do-items-from-the-database---7th-action">Step 7: Grab n random to-do item[s] from the database - 7th action.<a href="#step-7-grab-n-random-to-do-items-from-the-database---7th-action" class="anchor" aria-hidden="true">#</a> </h3>



<div class="expressive-code">
  <figure class="frame has-title not-content">
  <figcaption class="header">
    <span class="title">TodoService.php</span>
  </figcaption>
  <div class="highlight" title="TodoService.php"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">## ..rest of the service code
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">public</span> <span class="k">function</span> <span class="nf">random</span><span class="p">(</span><span class="nv">$data</span><span class="p">)</span> <span class="o">:</span> <span class="nx">BaseResponse</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nv">$length</span> <span class="o">=</span> <span class="nv">$data</span><span class="p">[</span><span class="s1">&#39;length&#39;</span><span class="p">]</span> <span class="o">??</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="nv">$porm</span> <span class="o">=</span> <span class="nx">Porm</span><span class="o">::</span><span class="na">from</span><span class="p">(</span><span class="s2">&#34;todos&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">          <span class="o">-&gt;</span><span class="na">random</span><span class="p">(</span><span class="nv">$length</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="k">return</span> <span class="nx">BaseResponse</span><span class="o">::</span><span class="na">JsonResponse</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s2">&#34;Todos found.&#34;</span><span class="p">,</span> <span class="nv">$porm</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span></span></span></code></pre></div>
  </figure>
</div>
<p>You can keep hitting this action and on each hit, you should get a different to-do item. You can also play with the <code>length</code> parameter to get more or less to-do items.</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;SERVICE&#34;</span><span class="p">:</span> <span class="s2">&#34;todo&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;ACTION&#34;</span><span class="p">:</span> <span class="s2">&#34;random&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;length&#34;</span><span class="p">:</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
  </figure>
</div>
<ul>
<li><input checked="" disabled="" type="checkbox"> Grab n random to-do item[s] from the database(Completed)</li>
</ul>
<h3 id="step-8-delete-a-to-do-item-from-the-database---5th-action">Step 8: Delete a to-do item from the database - 5th action.<a href="#step-8-delete-a-to-do-item-from-the-database---5th-action" class="anchor" aria-hidden="true">#</a> </h3>
<p>If you followed along upto this far, you should be able to implement this on your own. If you get stuck, you can refer to the code below.</p>



<div class="expressive-code">
  <figure class="frame has-title not-content">
  <figcaption class="header">
    <span class="title">TodoService.php</span>
  </figcaption>
  <div class="highlight" title="TodoService.php"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="k">public</span> <span class="k">function</span> <span class="nf">delete</span><span class="p">(</span><span class="nv">$data</span><span class="p">)</span> <span class="o">:</span> <span class="nx">BaseResponse</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nv">$id</span> <span class="o">=</span> <span class="nv">$data</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">      <span class="nx">Porm</span><span class="o">::</span><span class="na">from</span><span class="p">(</span><span class="s2">&#34;todos&#34;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">(</span><span class="nv">$id</span><span class="p">);</span> <span class="c1">// you can now hit &#39;all&#39; to see if this worked,
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="c1">// you should notice item with this id disappears.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="k">return</span> <span class="nx">BaseResponse</span><span class="o">::</span><span class="na">JsonResponse</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s2">&#34;Todo deleted.&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span></span></span></code></pre></div>
  </figure>
</div>
<p>Change your request object to the following in your client(postman).</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;SERVICE&#34;</span><span class="p">:</span> <span class="s2">&#34;todo&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;ACTION&#34;</span><span class="p">:</span> <span class="s2">&#34;delete&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;id&#34;</span><span class="p">:</span> <span class="mi">2</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
  </figure>
</div>
<p>If you did everything right, you should get your response as follows</p>



<div class="expressive-code">
  <figure class="frame not-content">
  <figcaption class="header">
    <span class="title"></span>
  </figcaption>
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;returnCode&#34;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;returnMessage&#34;</span><span class="p">:</span> <span class="s2">&#34;Todo deleted.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;returnData&#34;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;extraData&#34;</span><span class="p">:</span> <span class="kc">null</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
  </figure>
</div>
<ul>
<li><input checked="" disabled="" type="checkbox"> Delete a to-do item from the database(Completed)</li>
</ul>
<div class="callout callout-tip d-flex flex-row mt-4 mb-4 pt-4 pe-4 pb-2 ps-3">
  <svg class="outline/pencil svg-inline callout-icon me-2 mb-3"  xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" ><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 20h4L18.5 9.5a2.828 2.828.0 10-4-4L4 16v4"/><path d="M13.5 6.5l4 4"/></svg>
  <div class="callout-content">
    <div class="callout-title">
        <p>Point To Ponder</p>

      </div>
    <div class="callout-body">
      <ol>
<li>All our requests are made via POST method.</li>
<li>All our requests have similar body structure, they have a <code>SERVICE</code>, <code>ACTION</code>, and other param keys.</li>
<li>All our responses have the same response format, <code>returnCode</code>, <code>returnMessage</code>, <code>returnData</code>, and <code>extraData</code> keys.</li>
<li>We are hitting the same endpoint <code>http://localhost:8000/api/v1/</code> for all our requests.</li>
<li>We did not touch the routes or the kernel. but we only focused on the service!</li>
</ol>
<p>This is the beauty of the Moonlight architecture. It makes it easy to understand and maintain your code.</p>
<p>Imagine how fast you would pull off a new service with Pionia.</p>

    </div>
  </div>
</div>

<h3 id="full-service-source-code">Full Service Source Code<a href="#full-service-source-code" class="anchor" aria-hidden="true">#</a> </h3>
<details>
  <summary>Details</summary>
  


<div class="expressive-code">
  <figure class="frame has-title not-content">
  <figcaption class="header">
    <span class="title">TodoService.php</span>
  </figcaption>
  <div class="highlight" title="TodoService.php"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="o">&lt;?</span><span class="nx">php</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">namespace</span> <span class="nx">application\services</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">use</span> <span class="nx">Exception</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">use</span> <span class="nx">Pionia\exceptions\DatabaseException</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">use</span> <span class="nx">Pionia\request\BaseRestService</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">use</span> <span class="nx">Pionia\response\BaseResponse</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">use</span> <span class="nx">Porm\exceptions\BaseDatabaseException</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">use</span> <span class="nx">Porm\Porm</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">TodoService</span> <span class="k">extends</span> <span class="nx">BaseRestService</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="sd">/**
</span></span></span><span class="line"><span class="cl"><span class="sd">     * @throws BaseDatabaseException
</span></span></span><span class="line"><span class="cl"><span class="sd">     * @throws Exception
</span></span></span><span class="line"><span class="cl"><span class="sd">     */</span>
</span></span><span class="line"><span class="cl">    <span class="k">public</span> <span class="k">function</span> <span class="nf">createOrUpdate</span><span class="p">(</span><span class="nv">$data</span><span class="p">)</span> <span class="o">:</span> <span class="nx">BaseResponse</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$title</span> <span class="o">=</span> <span class="nv">$data</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$description</span> <span class="o">=</span> <span class="nv">$data</span><span class="p">[</span><span class="s1">&#39;description&#39;</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$id</span> <span class="o">=</span> <span class="nv">$data</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">??</span> <span class="k">null</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$id</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// here we can create
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="nv">$saved</span> <span class="o">=</span> <span class="nx">Porm</span><span class="o">::</span><span class="na">from</span><span class="p">(</span><span class="s2">&#34;todos&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="o">-&gt;</span><span class="na">save</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">                    <span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="nv">$title</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="s1">&#39;description&#39;</span> <span class="o">=&gt;</span> <span class="nv">$description</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="p">]);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// here we can update
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="nx">Porm</span><span class="o">::</span><span class="na">from</span><span class="p">(</span><span class="s2">&#34;todos&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="o">-&gt;</span><span class="na">update</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">                    <span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="nv">$title</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="s1">&#39;description&#39;</span> <span class="o">=&gt;</span> <span class="nv">$description</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="p">],</span> <span class="nv">$id</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="nv">$saved</span> <span class="o">=</span> <span class="nx">Porm</span><span class="o">::</span><span class="na">from</span><span class="p">(</span><span class="s2">&#34;todos&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nv">$id</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nx">BaseResponse</span><span class="o">::</span><span class="na">JsonResponse</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s2">&#34;Todo </span><span class="si">$saved-&gt;title</span><span class="s2"> created.&#34;</span><span class="p">,</span> <span class="nv">$saved</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="sd">/**
</span></span></span><span class="line"><span class="cl"><span class="sd">     * @throws BaseDatabaseException
</span></span></span><span class="line"><span class="cl"><span class="sd">     * @throws Exception
</span></span></span><span class="line"><span class="cl"><span class="sd">     */</span>
</span></span><span class="line"><span class="cl">    <span class="k">public</span> <span class="k">function</span> <span class="nf">all</span><span class="p">()</span> <span class="o">:</span> <span class="nx">BaseResponse</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$data</span> <span class="o">=</span> <span class="nx">Porm</span><span class="o">::</span><span class="na">from</span><span class="p">(</span><span class="s2">&#34;todos&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nx">BaseResponse</span><span class="o">::</span><span class="na">JsonResponse</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s2">&#34;Todos found.&#34;</span><span class="p">,</span> <span class="nv">$data</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="sd">/**
</span></span></span><span class="line"><span class="cl"><span class="sd">     * @throws Exception
</span></span></span><span class="line"><span class="cl"><span class="sd">     */</span>
</span></span><span class="line"><span class="cl">    <span class="k">public</span> <span class="k">function</span> <span class="nf">one</span><span class="p">(</span><span class="nv">$data</span><span class="p">)</span> <span class="o">:</span> <span class="nx">BaseResponse</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$id</span> <span class="o">=</span> <span class="nv">$data</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="nv">$res</span> <span class="o">=</span> <span class="nx">Porm</span><span class="o">::</span><span class="na">from</span><span class="p">(</span><span class="s1">&#39;todos&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nv">$id</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="nv">$res</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="nx">BaseResponse</span><span class="o">::</span><span class="na">JsonResponse</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="k">null</span><span class="p">,</span> <span class="nv">$data</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">throw</span> <span class="k">new</span> <span class="nx">DatabaseException</span><span class="p">(</span><span class="s2">&#34;No todo with id </span><span class="si">$id</span><span class="s2"> found.&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="sd">/**
</span></span></span><span class="line"><span class="cl"><span class="sd">     * @throws BaseDatabaseException
</span></span></span><span class="line"><span class="cl"><span class="sd">     */</span>
</span></span><span class="line"><span class="cl">    <span class="k">public</span> <span class="k">function</span> <span class="nf">delete</span><span class="p">(</span><span class="nv">$data</span><span class="p">)</span> <span class="o">:</span> <span class="nx">BaseResponse</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$id</span> <span class="o">=</span> <span class="nv">$data</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">        <span class="nx">Porm</span><span class="o">::</span><span class="na">from</span><span class="p">(</span><span class="s2">&#34;todos&#34;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">(</span><span class="nv">$id</span><span class="p">);</span> <span class="c1">// you can now hit all to see if this worked,
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// you should notice item with this id disappears.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">return</span> <span class="nx">BaseResponse</span><span class="o">::</span><span class="na">JsonResponse</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s2">&#34;Todo deleted.&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="sd">/**
</span></span></span><span class="line"><span class="cl"><span class="sd">     * @throws Exception
</span></span></span><span class="line"><span class="cl"><span class="sd">     */</span>
</span></span><span class="line"><span class="cl">    <span class="k">public</span> <span class="k">function</span> <span class="nf">random</span><span class="p">(</span><span class="nv">$data</span><span class="p">)</span> <span class="o">:</span> <span class="nx">BaseResponse</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$length</span> <span class="o">=</span> <span class="nv">$data</span><span class="p">[</span><span class="s1">&#39;length&#39;</span><span class="p">]</span> <span class="o">??</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="nv">$porm</span> <span class="o">=</span> <span class="nx">Porm</span><span class="o">::</span><span class="na">from</span><span class="p">(</span><span class="s2">&#34;todos&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="o">-&gt;</span><span class="na">random</span><span class="p">(</span><span class="nv">$length</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nx">BaseResponse</span><span class="o">::</span><span class="na">JsonResponse</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s2">&#34;Todos found.&#34;</span><span class="p">,</span> <span class="nv">$porm</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
  </figure>
</div>
</details>
<h2 id="post-tutorial----what-next">Post Tutorial &ndash; What Next?<a href="#post-tutorial----what-next" class="anchor" aria-hidden="true">#</a> </h2>

  <div class="card-nav d-flex flex-column flex-sm-row">
  <div class="card text-end w-100">
    <div class="card-body d-flex">
      <div class="d-flex flex-column me-auto text-start">
        <h5 class="card-title my-0"><a href="/documentation/requests/" class="stretched-link text-reset text-decoration-none">Deep Dive into Pionia Requests</a></h5>
        <p class="card-text mt-1">Explore more features about the Pionia Requests and the request cycle.</p>
      </div>
      <div class="d-flex flex-column justify-content-center">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-arrow-right" width="20" height="20" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
          <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
          <path d="M5 12l14 0"></path>
          <path d="M13 18l6 -6"></path>
          <path d="M13 6l6 6"></path>
        </svg>
      </div>
    </div>
  </div>
  </div>

			<div class="page-footer-meta d-flex flex-column flex-md-row justify-content-between">
				<div class="last-modified">
    <a href="https://github.com/PioniaPHP-project/pionia-docs/commit/53507ad210fba65d70e96a3bb8e20aba04a14249">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>
      Last updated on July 5, 2024
    </a>
  </div>

				


  













<div class="edit-page">
  <a href="https://github.com/PioniaPHP-project/pionia-docs/blob/main/content//docs/documentation/400_tutorial.md">
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit-2">
      <path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path>
    </svg>
    Edit this page on GitHub
  </a>
</div>

				</div>
			<div class="page-nav d-flex flex-column flex-sm-row">
	
	<div class="card w-100">
			<div class="card-body d-flex">
				<div class="d-flex flex-column justify-content-center">
					<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-arrow-left" width="20" height="20" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
						<path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
						<path d="M5 12l14 0"></path>
						<path d="M5 12l6 6"></path>
						<path d="M5 12l6 -6"></path>
				 	</svg>
				</div>
				<div class="d-flex flex-column">
					<div class="text-body-secondary">Prev</div>
					<a href="/documentation/frontend-integration/" class="stretched-link text-reset text-decoration-none">Frontend Integration</a>
				</div>
			</div>
		</div>
	<div class="m-2"></div>
	<div class="card text-end w-100">
			<div class="card-body d-flex justify-content-end">
				<div class="d-flex flex-column">
					<div class="text-body-secondary">Next</div>
					<a href="/documentation/services/services/" class="stretched-link text-reset text-decoration-none">Services</a>
				</div>
				<div class="d-flex flex-column justify-content-center">
					<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-arrow-right" width="20" height="20" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
						<path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
						<path d="M5 12l14 0"></path>
						<path d="M13 18l6 -6"></path>
						<path d="M13 6l6 6"></path>
					</svg>
				</div>
			</div>
		</div>
	</div>

			
		</main>
		
	</div>

      
      </div>
    </div>
    
    
    <footer class="footer text-muted">
  <div class="container-sm">
    <div class="row">
      <div class="col-lg-8 text-center text-lg-start">
        <ul class="list-inline">
          <li class="list-inline-item"><a class="text-muted" href="/privacy/">Privacy Policy</a></li>
        </ul>
      </div>
      <div class="col-lg-8 text-center text-lg-end">
        <ul class="list-inline">
          <li class="list-inline-item">Brought to you by <a class="text-muted" href="https://servicecops.com/">Service Cops</a></li>
        </ul>
      </div>
    </div>
  </div>
</footer>

    

<script async
  src="/js/app.fee9f8ec7475f74b15d2b2c76604e00670c577ef11ab1b2c92344ab979b9ace4.js"
  integrity="sha256-/un47HR190sV0rLHZgTgBnDFd&#43;8RqxsskjRKuXm5rOQ=">
</script>





<script async
  src="/js/flexsearch.f41f5ca0007df2c47e9e7872158f93feda934e4cc9dbcbc02e471503b49d8087.js"
  integrity="sha256-9B9coAB98sR&#43;nnhyFY&#43;T/tqTTkzJ28vALkcVA7SdgIc=">
</script>
<script async
  src="/js/search-modal.bbdea845b287fc7f22a081c11a25b5bbfa96e74e43b36be5733f16439caf46be.js"
  integrity="sha256-u96oRbKH/H8ioIHBGiW1u/qW505Ds2vlcz8WQ5yvRr4=">
</script>

    <div class="d-inline-flex fixed-bottom-right pb-4 pe-4">
  <button id="toTop" type="button" class="btn btn-primary rounded-circle ms-auto p-2"><span class="visually-hidden">Top</span><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-up" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M6 15l6 -6l6 6"></path></svg></button>
</div>

    
  </body>
</html>
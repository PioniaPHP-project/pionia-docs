<!doctype html>
<html lang="en" data-bs-theme="auto">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=63449&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><link rel="preload" href="http://localhost:63449/fonts/vendor/jost/jost-v4-latin-regular.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="http://localhost:63449/fonts/vendor/jost/jost-v4-latin-500.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="http://localhost:63449/fonts/vendor/jost/jost-v4-latin-700.woff2" as="font" type="font/woff2" crossorigin>
<script 
  src="/js/color-mode.f14b3e296de1d0b69e75af684b62a4a912a2cadab04e36123407cd8388204f1d.js"
  integrity="sha256-8Us&#43;KW3h0Laeda9oS2KkqRKiytqwTjYSNAfNg4ggTx0=">
</script>


<link rel="stylesheet" href="/main.01b0834d5af51b24812d02878d09c8d7677d6b8af13164fb50215889dc19aaefd0e9366c13b45a9a57ae481dfd1836bce46b5ebfe461d56e3498b9443d8c5e27.css" integrity="sha512-AbCDTVr1GySBLQKHjQnI12d9a4rxMWT7UCFYidwZqu/Q6TZsE7RamleuSB39GDa85Gtev&#43;Rh1W40mLlEPYxeJw==" crossorigin="anonymous">

<noscript><style>img.lazyload { display: none; }</style></noscript><base href="http://localhost:63449/docs/moonlight/">
  <link rel="canonical" href="http://localhost:63449/docs/moonlight/"><link rel="alternate" type="application/rss+xml" href="http://localhost:63449/docs/moonlight/index.xml" title="MoonLight Architecture | Pionia"><link rel="sitemap" type="application/xml" href="http://localhost:63449/docs/moonlight/sitemap.xml" title="MoonLight Architecture | Pionia">
<title>MoonLight Architecture  |  Pionia</title>
<meta name="description" content="This page describes the MoonLight Architecture.">

    
    <link rel="icon" href="/favicon.ico" sizes="32x32">
    
    
      <link
        rel="apple-touch-icon"
        href="/apple-touch-icon.png"
        sizes="180x180"
        type="image/png"
      >
      <link
        rel="icon"
        href="/favicon-192x192.png"
        sizes="192x192"
        type="image/png"
      >
      <link
        rel="icon"
        href="/favicon-512x512.png"
        sizes="512x512"
        type="image/png"
      >
<link rel="manifest" href="/manifest.webmanifest">
<meta property="og:title" content="MoonLight Architecture">
<meta property="og:description" content="This page describes the MoonLight Architecture.">
<meta property="og:type" content="website">
<meta property="og:url" content="http://localhost:63449/docs/moonlight/"><meta property="og:image" content="http://localhost:63449/pionia.png"><meta property="og:site_name" content="Pionia Framework">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://localhost:63449/pionia.png"><meta name="twitter:title" content="MoonLight Architecture">
<meta name="twitter:description" content="This page describes the MoonLight Architecture.">
<meta name="twitter:site" content="@pionia">

    
    <script type="application/ld+json">
  {
   "@context": "https://schema.org",
   "@type": "BreadcrumbList",
   "itemListElement": [
     {
       "@type": "ListItem",
       "item": "http://localhost:63449/",
       "name": "Pionia Framework",
       "position": 1
     },
     {
       "@type": "ListItem",
       "item": "http://localhost:63449/docs/",
       "name": "Docs",
       "position": 2
     },
     {
       "@type": "ListItem",
       "name": "Moon Light Architecture",
       "position": 3
     }
   ]
 }
</script>





</head>

  
  <body class="list section docs" data-bs-spy="scroll" data-bs-target="#toc" data-bs-root-margin="0px 0px -60%" data-bs-smooth-scroll="true" tabindex="0">
    <div class="header-bar"></div>
<header class="navbar navbar-expand-lg">
  <div class="container-sm">
  
    <a class="navbar-brand me-auto me-lg-3" href="/">Pionia</a>

    
    
    <button type="button" id="searchToggleMobile" class="btn btn-link nav-link mx-2 d-lg-none" aria-label="Search website">
      <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
        <circle cx="10" cy="10" r="7"></circle>
        <line x1="21" y1="21" x2="15" y2="15"></line>
      </svg>
    </button>
    
    <button class="btn btn-link d-lg-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavSection" aria-controls="offcanvasNavSection" aria-label="Open section navigation menu">
      <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-dots-vertical" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
        <path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path>
        <path d="M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path>
        <path d="M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path>
      </svg>
    </button>
    <div class="offcanvas offcanvas-start d-lg-none" tabindex="-1" id="offcanvasNavSection" aria-labelledby="offcanvasNavSectionLabel">
      <div class="header-bar"></div>
      <div class="offcanvas-header">
        <h5 class="offcanvas-title" id="offcanvasNavSectionLabel">Docs</h5>
        <button type="button" class="btn btn-link nav-link p-0 ms-auto" data-bs-dismiss="offcanvas" aria-label="Close">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-x" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
            <path d="M18 6l-12 12"></path>
            <path d="M6 6l12 12"></path>
          </svg>
        </button>
      </div>
      <div class="offcanvas-body">
        <aside class="doks-sidebar mt-n3">
          <nav id="doks-docs-nav" aria-label="Tertiary navigation">
            
  
    
<nav class="section-nav docs-links">
  <ul class="list-unstyled">

  <li class="active" >
      <a aria-current="page" href="/docs/moonlight/">MoonLight Architecture</a>
  </li>

  <li>
    <details open>
      <summary>Documentation</summary>
      <ul class="list-unstyled list-nested">

  <li>
      <a href="/documentation/api-tutorial/">API Tutorial</a>
  </li>

  <li>
      <a href="/documentation/introduction/">Introduction</a>
  </li>

  <li>
      <a href="/documentation/requests/">Requests</a>
  </li>

  <li>
      <a href="/documentation/structure/">Structure</a>
  </li>

  <li>
      <a href="/documentation/database/">Database</a>
  </li>
      </ul>
    </details>
  </li>

  <li>
    <details>
      <summary>Reference</summary>
      <ul class="list-unstyled list-nested">

  <li>
      <a href="/reference/example-reference/">Example Reference</a>
  </li>
      </ul>
    </details>
  </li>
  </ul>
</nav>

  

          </nav>
        </aside>
      </div>
    </div>
    
    <button class="btn btn-link nav-link mx-2 order-3 d-lg-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavMain" aria-controls="offcanvasNavMain" aria-label="Open main navigation menu">
      <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-menu" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
        <line x1="4" y1="8" x2="20" y2="8"></line>
        <line x1="4" y1="16" x2="20" y2="16"></line>
      </svg>
    </button>

    
    <div class="offcanvas offcanvas-end h-auto" tabindex="-1" id="offcanvasNavMain" aria-labelledby="offcanvasNavMainLabel">
      <div class="header-bar d-lg-none"></div>
      <div class="offcanvas-header">
        <h5 class="offcanvas-title" id="offcanvasNavMainLabel">Pionia</h5>
        <button type="button" class="btn btn-link nav-link p-0 ms-auto" data-bs-dismiss="offcanvas" aria-label="Close">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-x" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
            <path d="M18 6l-12 12"></path>
            <path d="M6 6l12 12"></path>
         </svg>
        </button>
      </div>
      
      <div class="offcanvas-body d-flex flex-column flex-lg-row justify-content-between">
        <ul class="navbar-nav flex-grow-1"><li class="nav-item">
                <a class="nav-link" href="http://localhost:63449/documentation/introduction/">Documentation</a>
              </li>
            <li class="nav-item">
                <a class="nav-link" href="http://localhost:63449/docs/moonlight/">Moonlight</a>
              </li>
            <li class="nav-item">
                <a class="nav-link" href="http://localhost:63449/documentation/api-tutorial/">Tutorial</a>
              </li>
            </ul>

        
        
        <button type="button" id="searchToggleDesktop" class="btn btn-link nav-link p-2 d-none d-lg-block" aria-label="Search website">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
            <circle cx="10" cy="10" r="7"></circle>
            <line x1="21" y1="21" x2="15" y2="15"></line>
          </svg>
        </button>
        
        
        
        <button id="buttonColorMode" class="btn btn-link mx-auto nav-link p-0 ms-lg-2 me-lg-1" type="button" aria-label="Toggle theme">
          <svg data-bs-theme-value="dark" xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-moon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
            <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path>
          </svg>
          <svg data-bs-theme-value="light" xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-sun" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
            <path d="M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0m-5 0h1m8 -9v1m8 8h1m-9 8v1m-6.4 -15.4l.7 .7m12.1 -.7l-.7 .7m0 11.4l.7 .7m-12.1 -.7l-.7 .7"></path>
          </svg>
        </button>
        
        <ul id="socialMenu" class="nav mx-auto flex-row order-lg-4">
          <li class="nav-item">
              <a class="nav-link social-link" href="https://github.com/PioniaPHP-project/pionia-docs"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5"></path></svg><small class="ms-2 visually-hidden">GitHub</small></a>
            </li>
          </ul>
        
        <a class="btn btn-primary rounded-pill mt-2 btn-block d-lg-none" href="http://localhost:63449/documentation/introduction/#get-started" role="button">Get started</a>
        </div>
    </div>

    
    <a class="btn btn-primary rounded-pill ms-3 me-2 px-4 order-lg-3 d-none d-lg-block" href="http://localhost:63449/documentation/introduction/#get-started" role="button">Get started</a>
    </div>
</header>

<div class="modal" id="searchModal" tabindex="-1" aria-labelledby="searchModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-fullscreen-md-down">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5 visually-hidden" id="searchModalLabel">Search</h1>
        <button type="button" class="btn-close visually-hidden" data-bs-dismiss="modal" aria-label="Close"></button>
        <div class="search-input flex-grow-1 d-none">
          <form id="search-form" class="search-form" action="#" method="post" accept-charset="UTF-8" role="search">
            <label for="query" class="visually-hidden">Search</label>
            <div class="d-flex">
              <input type="search" id="query" name="query" class="search-text form-control form-control-lg" placeholder="Search" aria-label="Search" maxlength="128" autocomplete="off">
              <button type="button" class="btn btn-link text-decoration-none px-0 ms-3 d-md-none" data-bs-dismiss="modal" aria-label="Close">Cancel</button>
            </div>
          </form>
        </div>
      </div>
      <div class="modal-body">
        <p class="search-loading status message d-none mt-3 text-center">Loading search indexâ€¦</p>
        <p class="search-no-recent message d-none mt-3 text-center">No recent searches</p>
        <p class="search-no-results message d-none mt-3 text-center">No results for "<strong><span class="query-no-results">Query here</span></strong>"</p>
        <div id="searchResults" class="search-results"></div>
        <template>
          <article class="search-result list-view">
            <div class="card my-3">
              <div class="card-body">
                <header>
                  <h2 class="h5 title title-submitted mb-0"><a class="stretched-link text-decoration-none text-reset" href="#">Title here</a></h2>
                  <div class="submitted d-none"><time class="created-date">Date here</time></div>
                </header>
                <div class="content">Summary here</div>
              </div>
            </div>
          </article>
        </template>
      </div>
      <div class="modal-footer">
        <ul class="list-inline me-auto d-none d-md-block">
          <li class="list-inline-item"><kbd class="me-2"><svg width="15" height="15" aria-label="Enter key" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M12 3.53088v3c0 1-1 2-2 2H4M7 11.53088l-3-3 3-3"></path></g></svg></kbd><span class="DocSearch-Label">to select</span></li>
          <li class="list-inline-item"><kbd class="me-2"><svg width="15" height="15" aria-label="Arrow down" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M7.5 3.5v8M10.5 8.5l-3 3-3-3"></path></g></svg></kbd><kbd class="me-2"><svg width="15" height="15" aria-label="Arrow up" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M7.5 11.5v-8M10.5 6.5l-3-3-3 3"></path></g></svg></kbd><span class="DocSearch-Label">to navigate</span></li>
          <li class="list-inline-item"><kbd class="me-2"><svg width="15" height="15" aria-label="Escape key" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M13.6167 8.936c-.1065.3583-.6883.962-1.4875.962-.7993 0-1.653-.9165-1.653-2.1258v-.5678c0-1.2548.7896-2.1016 1.653-2.1016.8634 0 1.3601.4778 1.4875 1.0724M9 6c-.1352-.4735-.7506-.9219-1.46-.8972-.7092.0246-1.344.57-1.344 1.2166s.4198.8812 1.3445.9805C8.465 7.3992 8.968 7.9337 9 8.5c.032.5663-.454 1.398-1.4595 1.398C6.6593 9.898 6 9 5.963 8.4851m-1.4748.5368c-.2635.5941-.8099.876-1.5443.876s-1.7073-.6248-1.7073-2.204v-.4603c0-1.0416.721-2.131 1.7073-2.131.9864 0 1.6425 1.031 1.5443 2.2492h-2.956"></path></g></svg></kbd><span class="DocSearch-Label">to close</span></li>
        </ul>
        <p class="d-md-none">Search by <a class="text-decoration-none" href="https://github.com/nextapps-de/flexsearch">FlexSearch</a></p>
      </div>
    </div>
  </div>
</div>


    <div class="wrap container-sm" role="document">
      <div class="content">
      
        
<div class="row justify-content-center">
  <div class="col-md-12 col-lg-10 col-xl-8">
    <article>
      <h1 class="text-center">MoonLight Architecture</h1>
      <div class="text-center"><p>MoonLight is a rather new architecture that is based on the commonly used architectures of gRPC, MVC(Model View Controller), Micro-Services and Monolothic. It picks the best of all these architectures and combines them to create a new architecture that is more efficient and scalable.</p>
<h2 id="the-moonlight-paradigm">The MoonLight paradigm</h2>
<p>Below are the new conventions that MoonLight architecture brings to the table:</p>
<p>Architecture Overview</p>

<img
  srcset="data:image/webp;base64,UklGRjwAAABXRUJQVlA4IDAAAABwAQCdASoQAAsAAph8J7ACdAF1AAD&#43;7wnmsKNoKPqB28P7Rr4C9nw28BDAnfIAAAA="
      data-srcset="/docs/moonlight/image_hu347d9461f0e4d09c5cede9aef9eb3918_245204_480x0_resize_q85_h2_lanczos_3.webp 480w,/docs/moonlight/image_hu347d9461f0e4d09c5cede9aef9eb3918_245204_576x0_resize_q85_h2_lanczos_3.webp 576w,/docs/moonlight/image_hu347d9461f0e4d09c5cede9aef9eb3918_245204_768x0_resize_q85_h2_lanczos_3.webp 768w,/docs/moonlight/image_hu347d9461f0e4d09c5cede9aef9eb3918_245204_1025x0_resize_q85_h2_lanczos_3.webp 1025w,/docs/moonlight/image_hu347d9461f0e4d09c5cede9aef9eb3918_245204_1162x0_resize_q85_h2_lanczos_3.webp 1162w"
      data-sizes="auto"
  src="/docs/moonlight/image_hu347d9461f0e4d09c5cede9aef9eb3918_245204_480x0_resize_q85_bgffffff_lanczos_3.jpg"
  width="1162"
  height="811"
  decoding="async"
  fetchpriority="auto"
  loading="lazy"
  alt=""
  class="lazyload blur-up"
>
<!-- add a video showing the same here -->
<div class="callout callout-tip d-flex flex-row mt-4 mb-4 pt-4 pe-4 pb-2 ps-3">
  <svg class="outline/car svg-inline callout-icon me-2 mb-3"  xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" ><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 17m-2 0a2 2 0 104 0 2 2 0 10-4 0"/><path d="M17 17m-2 0a2 2 0 104 0 2 2 0 10-4 0"/><path d="M5 17H3v-6l2-5h9l4 5h1a2 2 0 012 2v4h-2m-4 0H9m-6-6h15m-6 0V6"/></svg>
  <div class="callout-content">
    <div class="callout-title">
        <p>The car scenario! &ndash; 1</p>

      </div>
    <div class="callout-body">
      <p>Imagine a scenario of a car, the car can have passengers and multiple passengers. The job of the driver is to controll the rest of the car, and the passengers to behave themselves and not interfere with the driver. The driver has one steering wheel in the entire car. Some cars may have a conductor who is responsible for the passengers instead of the driver. This helps the driver to focus on the road and not the passengers.</p>

    </div>
  </div>
</div>

<div class="callout callout-tip d-flex flex-row mt-4 mb-4 pt-4 pe-4 pb-2 ps-3">
  <svg class="outline/traffic-lights svg-inline callout-icon me-2 mb-3"  xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" ><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 2m0 5a5 5 0 015-5h0a5 5 0 015 5v10a5 5 0 01-5 5h0a5 5 0 01-5-5z"/><path d="M12 7m-1 0a1 1 0 102 0 1 1 0 10-2 0"/><path d="M12 12m-1 0a1 1 0 102 0 1 1 0 10-2 0"/><path d="M12 17m-1 0a1 1 0 102 0 1 1 0 10-2 0"/></svg>
  <div class="callout-content">
    <div class="callout-title">
        <p>The traffic scenario! &ndash; 2</p>

      </div>
    <div class="callout-body">
      <p>Based on the scenario above, the driver is stopped by the traffic police man, the polica man moves to the driver&rsquo;s side and not the passengers side. The police man looks through the driver&rsquo;s window and checks if there are any issues with the passengers. He asks the first passenger to pass over their id, the passenger forwards the id to the driver who then hands it over to the police. He checks and gives it to the driver who then hands it over to the passenger.</p>

    </div>
  </div>
</div>

<p><em><strong>NOTE</strong></em> Remember the above scenarios as we dive into the MoonLight architecture</p>
<h5 id="1-single-api-endpointroute">1. Single API endpoint/route</h5>
<p>In the moonlight, all requests target the same endpoint. This is to ensure that the application is scalable and easy to maintain. This also makes it easier to debug and monitor the application.</p>
<p>Assuming the application is running on <code>http://localhost:3000</code>, all requests will be made to <code>http://localhost:3000/api/v1/</code>. This is the only endpoint that is exposed to the outside world.</p>
<p>On top of other advantages, now frontend devs don&rsquo;t have to worry about the base URL of the API. They can just make requests to the <code>/api/v1/</code> endpoint and the application will handle the rest.</p>
<div class="callout callout-tip d-flex flex-row mt-4 mb-4 pt-4 pe-4 pb-2 ps-3">
  <svg class="outline/book svg-inline callout-icon me-2 mb-3"  xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" ><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 19a9 9 0 019 0 9 9 0 019 0"/><path d="M3 6a9 9 0 019 0 9 9 0 019 0"/><path d="M3 6v13"/><path d="M12 6v13"/><path d="M21 6v13"/></svg>
  <div class="callout-content">
    <div class="callout-title">
        <p>Point To Ponder!</p>

      </div>
    <div class="callout-body">
      <p>This is our drivers window in the car scenario.</p>
<p>For anyone to interact with the application, they must go through this endpoint only.</p>

    </div>
  </div>
</div>

<h5 id="2-post-requests-only">2. POST Requests only</h5>
<p>All requests under moonlight architecture are made using the http method of POST only. This is to ensure that the requests are secure and the data is not exposed in the URL. Also, the application gets to benefit highly from ssl encryption and other security features that are available for POST requests.</p>
<h5 id="3-single-request-format">3. Single Request Format</h5>
<p>In Moonlight architecture, all requests are made in a similar format. This makes it easier to understand and debug the requests. Requests can either be be of type JSON or form-data.</p>
<p>Every request must define the <code>SERVICE</code> and <code>ACTION</code> to exacute in the request body plus the rest rest of the payload as required by the service.</p>



<div class="expressive-code">
  <figure class="frame has-title not-content">
  <figcaption class="header">
    <span class="title">POST http://localhost:3000/api/v1/</span>
  </figcaption>
  <div class="highlight" title="POST http://localhost:3000/api/v1/"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line hl"><span class="cl">    <span class="nt">&#34;SERVICE&#34;</span><span class="p">:</span> <span class="s2">&#34;users&#34;</span><span class="p">,</span>
</span></span><span class="line hl"><span class="cl">    <span class="nt">&#34;ACTION&#34;</span><span class="p">:</span> <span class="s2">&#34;get_user_by_profile&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;profile&#34;</span><span class="p">:</span> <span class="s2">&#34;@1233232&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
  </figure>
</div>
<div class="callout callout-note d-flex flex-row mt-4 mb-4 pt-4 pe-4 pb-2 ps-3">
  
  <div class="callout-content">
    
    <div class="callout-body">
      <p>The <code>SERVICE</code> and <code>ACTION</code> are required in every request. The rest of the payload is dependent on the service and action being executed.</p>

    </div>
  </div>
</div>

<div class="callout callout-tip d-flex flex-row mt-4 mb-4 pt-4 pe-4 pb-2 ps-3">
  <svg class="outline/book svg-inline callout-icon me-2 mb-3"  xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" ><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 19a9 9 0 019 0 9 9 0 019 0"/><path d="M3 6a9 9 0 019 0 9 9 0 019 0"/><path d="M3 6v13"/><path d="M12 6v13"/><path d="M21 6v13"/></svg>
  <div class="callout-content">
    <div class="callout-title">
        <p>Point To Ponder!</p>

      </div>
    <div class="callout-body">
      <p>This architecture, if to be well implemented must follow the Object Oriented Programming paradigm.
With this, <code>services</code> should/must be classes or interfaces(golang) that combine together related business logic like <code>AuthenticationService</code>, <code>ProductService</code>, <code>OrderService</code> etc.</p>
<p>And Actions should be methods in these classes like <code>login</code>, <code>register</code> in the <code>AuthenticationService</code> class.</p>

    </div>
  </div>
</div>

<h5 id="4-single-response-format">4. Single Response Format</h5>
<p>This architecture also calls for a single response format. This makes it way easier to understand and debug the responses. The response format is as follows:</p>



<div class="expressive-code">
  <figure class="frame has-title not-content">
  <figcaption class="header">
    <span class="title">Response</span>
  </figcaption>
  <div class="highlight" title="Response"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line hl"><span class="cl">    <span class="nt">&#34;statusCode&#34;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
</span></span><span class="line hl"><span class="cl">    <span class="nt">&#34;returnMessage&#34;</span><span class="p">:</span> <span class="s2">&#34;Some cool message here or null&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;returnData&#34;</span><span class="p">:</span> <span class="s2">&#34;the data you&#39;re sending to the frontend&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;extraData&#34;</span><span class="p">:</span> <span class="s2">&#34;any extra data you want to send to the frontend&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
  </figure>
</div>
<p>With <code>statusCode</code>, it implies that the developer/business can define their own custom status codes. However, by convention, a status code of <code>0</code> implies success and is recommended to be kept for the same.</p>
<h5 id="5-http-200-ok-for-all">5. HTTP 200 OK for all.</h5>
<p>All requests in this architecture that reach the application server should/must return an http status of 200 OK. The only special case is 502 Gateway Error which is returned when the application server is down or unreachable.</p>
<div class="callout callout-note d-flex flex-row mt-4 mb-4 pt-4 pe-4 pb-2 ps-3">
  <svg class="outline/book svg-inline callout-icon me-2 mb-3"  xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" ><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 19a9 9 0 019 0 9 9 0 019 0"/><path d="M3 6a9 9 0 019 0 9 9 0 019 0"/><path d="M3 6v13"/><path d="M12 6v13"/><path d="M21 6v13"/></svg>
  <div class="callout-content">
    <div class="callout-title">
        <p>Point To Ponder!</p>

      </div>
    <div class="callout-body">
      <p>Think about it, the application server actually handled your request so whether the request raised an exception or successfully executed, the server actually handled.
And that&rsquo;s what we are actually looking for.</p>

    </div>
  </div>
</div>

<div class="callout callout-tip d-flex flex-row mt-4 mb-4 pt-4 pe-4 pb-2 ps-3">
  <svg class="outline/traffic-lights svg-inline callout-icon me-2 mb-3"  xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" ><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 2m0 5a5 5 0 015-5h0a5 5 0 015 5v10a5 5 0 01-5 5h0a5 5 0 01-5-5z"/><path d="M12 7m-1 0a1 1 0 102 0 1 1 0 10-2 0"/><path d="M12 12m-1 0a1 1 0 102 0 1 1 0 10-2 0"/><path d="M12 17m-1 0a1 1 0 102 0 1 1 0 10-2 0"/></svg>
  <div class="callout-content">
    <div class="callout-title">
        <p>Remember the traffic scenario!</p>

      </div>
    <div class="callout-body">
      <p>Every time our police man poses a question, he expects an answer. If the driver doesn&rsquo;t have an answer, he should say so(which is also an answer) and not just keep quiet.</p>

    </div>
  </div>
</div>

<h5 id="6-single-controller-per-application">6. Single Controller Per Application.</h5>
<p>In this architecture, there is only one controller that handles all the requests. This controller is responsible for routing the requests to the appropriate service and action. This makes it easier to maintain and debug the application. This must be one per application.</p>
<p>To achieve api versioning, this controller can have multiple actions each pointing to a different version of the application. Each action can then route the request to the appropriate service switch. It is at this point that the app should handle all exceptions that might be raised by the services and then return a 200 OK response with the appropriate message.</p>
<p>Example using php.</p>



<div class="expressive-code">
  <figure class="frame has-title not-content">
  <figcaption class="header">
    <span class="title">Controller</span>
  </figcaption>
  <div class="highlight" title="Controller"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl">  <span class="k">class</span> <span class="nc">ApiController</span> <span class="k">extends</span> <span class="nx">Controller</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">public</span> <span class="k">function</span> <span class="nf">v1</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="k">try</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="c1">// point to the service switch for version one
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>          <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="c1">// handle the exception here
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>          <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="k">public</span> <span class="k">function</span> <span class="nf">v2</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="k">try</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="c1">// point to the service switch for version two
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>          <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="c1">// handle the exception here
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>          <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;?</span><span class="nx">php</span></span></span></code></pre></div>
  </figure>
</div>
<p>No logic should be in the controller, it should only be responsible for routing the requests to the appropriate service and action.</p>
<div class="callout callout-tip d-flex flex-row mt-4 mb-4 pt-4 pe-4 pb-2 ps-3">
  <svg class="outline/book svg-inline callout-icon me-2 mb-3"  xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" ><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 19a9 9 0 019 0 9 9 0 019 0"/><path d="M3 6a9 9 0 019 0 9 9 0 019 0"/><path d="M3 6v13"/><path d="M12 6v13"/><path d="M21 6v13"/></svg>
  <div class="callout-content">
    <div class="callout-title">
        <p>Point To Ponder!</p>

      </div>
    <div class="callout-body">
      <p>This is the driver in the car scenario. The driver is responsible for routing the police man questions to the appropriate passenger.</p>
<p>The steering wheel is the <code>controller action</code> of the version we are targeting!</p>

    </div>
  </div>
</div>

<h5 id="7-single-service-switch-per-api-version">7. Single Service Switch Per API Version.</h5>
<p>In this architecture, there should only be one service switch that handles all the requests for a particular version of the application. This service switch is responsible reading the <code>SERVICE</code> in the request and the call the responsible service passing it the action(<code>ACTION</code>) and the rest of the payload.</p>
<p>The service switch is just a convention to make our controller clean and easy to maintain. It is not a must to have it, but it is recommended. Otherwise, the switching logic would be handled in the controller action responsible for the version.</p>
<div class="callout callout-tip d-flex flex-row mt-4 mb-4 pt-4 pe-4 pb-2 ps-3">
  <svg class="outline/book svg-inline callout-icon me-2 mb-3"  xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" ><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 19a9 9 0 019 0 9 9 0 019 0"/><path d="M3 6a9 9 0 019 0 9 9 0 019 0"/><path d="M3 6v13"/><path d="M12 6v13"/><path d="M21 6v13"/></svg>
  <div class="callout-content">
    <div class="callout-title">
        <p>Point To Ponder!</p>

      </div>
    <div class="callout-body">
      <p>This is the conductor in the car scenario. However much the driver can do everything the conductor can do, the conductor is their to reduce work load on the driver.</p>
<p>This implies the driver focuses on the road and the conductor focuses on the passengers.</p>
<p>The controller focuses on the mapping the request, the service switch focuses on mapping the service and the action.</p>

    </div>
  </div>
</div>

<h5 id="8-services-and-actions">8. Services and Actions</h5>
<p>In MoonLight architecture, services are classes or interfaces that combine together related business logic. For example, <code>AuthenticationService</code>, <code>ProductService</code>, <code>OrderService</code> etc.</p>
<p>Actions are methods in these classes like <code>login</code>, <code>register</code> in the <code>AuthenticationService</code> class.</p>
<div class="callout callout-tip d-flex flex-row mt-4 mb-4 pt-4 pe-4 pb-2 ps-3">
  <svg class="outline/book svg-inline callout-icon me-2 mb-3"  xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" ><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 19a9 9 0 019 0 9 9 0 019 0"/><path d="M3 6a9 9 0 019 0 9 9 0 019 0"/><path d="M3 6v13"/><path d="M12 6v13"/><path d="M21 6v13"/></svg>
  <div class="callout-content">
    <div class="callout-title">
        <p>Point To Ponder!</p>

      </div>
    <div class="callout-body">
      <p>This is the passenger in the car scenario. The passenger is responsible for their own luggage and reaching their destination. They are also responsible for fullfiling the driver&rsquo;s requests.</p>
<p>Remember, the driver asks the passenger for the id, the passenger passed it over to the driver! Passing the id is the passenger&rsquo;s responsibility(action).</p>

    </div>
  </div>
</div>

<h5 id="9-database-and-querying">9. Database and Querying</h5>
<p>In moonlight architecture, querying the database is highly recommended over using an ORM. This is because querying the database directly is faster and more efficient than using an ORM. Also, querying the database directly gives the developer more control over the queries and the data being returned.</p>
<p>Get started with the <a href="/documentation/api-tutorial/">Moonlight Implementation using Pionia</a>.</p>
<h5 id="10-separation-of-concerns">10. Separation of Concerns</h5>
<p>In this architecture, the backend is meant to support, command and act as a single source of truth for the frontend. This implies that the architecture requires implementers to implement the frontend and backend separately.</p>
<blockquote>
<blockquote>
</blockquote>
</blockquote>
<h6 id="advantages-of-moonlight-architecture">Advantages of MoonLight Architecture</h6>
<ol>
<li>Scalability :- Since adding new services and actions is easy, the application can be scaled easily.</li>
<li>Maintainability :- Small codebase and single-logic services make it easy to maintain the application. Even new developers can easily understand the codebase.</li>
<li>Security :- Since all requests are made using POST, the data is secure and not exposed in the URL. Also, action level authentication makes it easy to secure the application.</li>
<li>High Performance :- This is as a result of less abstraction and more direct database querying. Also, the architecture improves the developer performance since it reduces the codebase of the previously used architectures by almost 60%.</li>
<li>Easy Debugging :- Since all requests and responses are made in a similar format, it is easy to debug the application.</li>
<li>Frontend Integration :- One endpoint for all requests, one request format, one response format make it easy for frontend devs to integrate the api.</li>
</ol>
<blockquote>
<blockquote>
</blockquote>
</blockquote>
<h6 id="disadvantages-of-moonlight-architecture">Disadvantages of MoonLight Architecture</h6>
<ol>
<li>Some languages may not support switching between form-data and json requests. This might dictate all uploads to be base64 encoded.</li>
<li>Moonlight is only suitable for APIs and not for fullstack applications.</li>
<li>The architecture being new, there might be a learning curve for new developers and a small community to get help from.</li>
</ol>
<p>The community is growing and we are looking forward to having you on board.</p>
</div>
			<div class="card-list">
				
				
					
				
					
				
					
				
					
				
					
				
					
				
					
				
			</div>
    </article>
  </div>
</div>

      
      </div>
    </div>
    
    
    <footer class="footer text-muted">
  <div class="container-sm">
    <div class="row">
      <div class="col-lg-8 text-center text-lg-start">
        <ul class="list-inline">
          <li class="list-inline-item"><a class="text-muted" href="/privacy/">Privacy Policy</a></li>
        </ul>
      </div>
      <div class="col-lg-8 text-center text-lg-end">
        <ul class="list-inline">
          <li class="list-inline-item">Brought to you by <a class="text-muted" href="https://servicecops.com/">Service Cops</a></li>
        </ul>
      </div>
    </div>
  </div>
</footer>

    

<script async
  src="/js/app.6ce274b2411410f3193de528a44804d3776457fc634899431b6ae5949bbdf643.js"
  integrity="sha256-bOJ0skEUEPMZPeUopEgE03dkV/xjSJlDG2rllJu99kM=">
</script>





<script async
  src="/js/flexsearch.a43ad3e9453067320ab808b85ef437fc65518a219cfea8499e744b7b6f0b6924.js"
  integrity="sha256-pDrT6UUwZzIKuAi4XvQ3/GVRiiGc/qhJnnRLe28LaSQ=">
</script>
<script async
  src="/js/search-modal.543117a85590123cda9e96d1fcbf8bd22fc1a3a3ca3d31a816382f0f10f30a34.js"
  integrity="sha256-VDEXqFWQEjzanpbR/L&#43;L0i/Bo6PKPTGoFjgvDxDzCjQ=">
</script>

    <div class="d-inline-flex fixed-bottom-right pb-4 pe-4">
  <button id="toTop" type="button" class="btn btn-primary rounded-circle ms-auto p-2"><span class="visually-hidden">Top</span><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-up" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M6 15l6 -6l6 6"></path></svg></button>
</div>

    
  </body>
</html>